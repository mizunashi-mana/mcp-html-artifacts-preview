# Phase 4a: UX 改善（自動オープン・自動切り替え）

## 目的・ゴール

ブラウザでのプレビュー体験を大幅に改善する。アーティファクトに名前を付け、ダッシュボードで一覧管理し、ブラウザの自動オープン・自動切り替えで手動操作を最小化する。

## 実装方針

### 1. `create_page` に `name` パラメータを追加

- `Page` インターフェースに `name?: string` フィールドを追加
- `create_page` ツールのスキーマに `name`（optional）を追加
- `get_pages` / `get_page` のレスポンスに `name` を含める
- `update_page` でも `name` を更新可能にする

### 2. ダッシュボードページの実装

- HTTP サーバーのルート `/` にダッシュボードを配置
- 全アーティファクトを一覧表示（名前、タイトル、作成日時、リンク）
- SSE でリアルタイム更新（ページ作成・更新・削除を反映）

### 3. ブラウザ自動オープン

- 初回の `create_page` 呼び出し時にブラウザを自動起動
- ダッシュボード URL を開く（個別ページではなく）
- `--no-open` CLI オプションで無効化可能に

### 4. 新規アーティファクト作成時の自動切り替え

- `PageStore` の `create` イベントを追加
- ダッシュボードが SSE 経由で新規ページ作成を検知
- 自動的に新規ページへ遷移

## 完了条件

- [x] `create_page` で `name` を指定でき、レスポンスに含まれる
- [x] `update_page` で `name` を更新できる
- [x] `/` にダッシュボードページが表示される
- [x] ダッシュボードにアーティファクト一覧が表示される
- [x] ダッシュボードが SSE でリアルタイム更新される
- [x] 初回 `create_page` 時にブラウザが自動で開く
- [x] `--no-open` で自動オープンを無効化できる
- [x] 新規ページ作成時にダッシュボードから自動遷移する
- [x] 既存テストが通る
- [x] 新機能のテストが追加されている
- [x] lint / build が通る

## 作業ログ

- `page-store.ts`: `Page` に `name` フィールド追加、`create` イベント追加
- `tools.ts`: `create_page` / `update_page` に `name` パラメータ追加、全ツールのレスポンスに `name` 含める
- `http-server.ts`: ダッシュボード（`/`）、グローバル SSE（`/events`）、`buildDashboardHtml` 追加
- `cli.ts`: `--no-open` フラグ、初回 `create_page` 時のブラウザ自動オープン
- テスト: 79 テスト全通過（+9 新規テスト）
